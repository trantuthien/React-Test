{"version":3,"sources":["sendEmail-compiled-compiled.js"],"names":[],"mappings":"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","file":"sendEmail-compiled-compiled-compiled.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.confirmEmail = confirmEmail;\nexports.verifyUser = verifyUser;\nexports.checkUserExit = checkUserExit;\n\nvar _userinfo = require('../models/userinfo');\n\nvar _userinfo2 = _interopRequireDefault(_userinfo);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nvar constant = require('./constant'); /**\n                                       * Created by thientran on 8/14/16.\n                                       */\n\nvar nodemailer = require('nodemailer');\nvar Fconstant = require('./fconstant');\nvar fconstant = new Fconstant();\n\nfunction confirmEmail(res, userinfo, number) {\n  var smtpConfig = {\n    host: 'smtp.gmail.com',\n    port: 465,\n    secure: true, // use SSL\n    auth: {\n      user: 'thientt@topica.edu.vn',\n      pass: 'ttttttttA1@'\n    }\n  };\n  //  var transporter = nodemailer.createTransport('smtps://dev.edn.com.vn%40gmail.com:Edn102013@smtp.gmail.com');\n  var transporter = nodemailer.createTransport(smtpConfig);\n  var mailOptions = {\n    from: 'Topica - ThienTT <thientt@topica.edu.vn>',\n    to: userinfo.email,\n    subject: 'Acive Code from Topica',\n    text: 'Hi Your link active code is: ' + number,\n    html: '<h1>Hi from Topica</h1><p>Your active link is: <a href=\"http://localhost:8000/api/auth/verify?email=' + userinfo.email + '&activecode=' + number + '\">Active Now</a></p>'\n  };\n  transporter.sendMail(mailOptions, function (error, info) {\n    if (error) {\n      console.log(error);\n      fconstant.response(constant.RES_TYPE_JSON, res, false, constant.CREATE_ACTIVE_CODE_FAIL, 'CREATE_ACTIVE_CODE_FAIL');\n    } else {\n      //console.log(info.response);\n      fconstant.response(constant.RES_TYPE_JSON, res, true, constant.CREATE_ACTIVE_CODE_SUCCESS, 'CREATE_ACTIVE_CODE_SUCCESS');\n    }\n  });\n}\n\nfunction verifyUser(email, activecode, callback) {\n  var query = { 'email': email, 'activecode': activecode, 'isactive': 0 };\n  _userinfo2.default.findOneAndUpdate(query, { 'activecode': 0, 'isactive': 1 }, {\n    safe: true\n  }, function (err, model) {\n    console.log(err);\n    console.log(model);\n    if (model !== null) {\n      callback(true);\n    } else {\n      callback(false);\n    }\n  });\n}\n\nfunction checkUserExit(email, callback) {\n  var query = { 'email': email };\n  _userinfo2.default.findOne(query, function (err, userinfo) {\n    console.log(err);\n    console.log(userinfo);\n    if (userinfo !== null) {\n      callback(true);\n    } else {\n      callback(false);\n    }\n  });\n}\n;\n\n(function () {\n  if (typeof __REACT_HOT_LOADER__ === 'undefined') {\n    return;\n  }\n\n  __REACT_HOT_LOADER__.register(fconstant, 'fconstant', '/Users/thientran/Documents/SourceTree/React-Test/server/util/sendEmail.js');\n\n  __REACT_HOT_LOADER__.register(confirmEmail, 'confirmEmail', '/Users/thientran/Documents/SourceTree/React-Test/server/util/sendEmail.js');\n\n  __REACT_HOT_LOADER__.register(verifyUser, 'verifyUser', '/Users/thientran/Documents/SourceTree/React-Test/server/util/sendEmail.js');\n\n  __REACT_HOT_LOADER__.register(checkUserExit, 'checkUserExit', '/Users/thientran/Documents/SourceTree/React-Test/server/util/sendEmail.js');\n})();\n\n;\n\n//# sourceMappingURL=sendEmail-compiled.js.map\n\n;\n\n(function () {\n  if (typeof __REACT_HOT_LOADER__ === 'undefined') {\n    return;\n  }\n\n  __REACT_HOT_LOADER__.register(_userinfo2, '_userinfo2', '/home/black/Documents/Mern/React-Test/server/util/sendEmail-compiled.js');\n\n  __REACT_HOT_LOADER__.register(_interopRequireDefault, '_interopRequireDefault', '/home/black/Documents/Mern/React-Test/server/util/sendEmail-compiled.js');\n\n  __REACT_HOT_LOADER__.register(fconstant, 'fconstant', '/home/black/Documents/Mern/React-Test/server/util/sendEmail-compiled.js');\n\n  __REACT_HOT_LOADER__.register(confirmEmail, 'confirmEmail', '/home/black/Documents/Mern/React-Test/server/util/sendEmail-compiled.js');\n\n  __REACT_HOT_LOADER__.register(verifyUser, 'verifyUser', '/home/black/Documents/Mern/React-Test/server/util/sendEmail-compiled.js');\n\n  __REACT_HOT_LOADER__.register(checkUserExit, 'checkUserExit', '/home/black/Documents/Mern/React-Test/server/util/sendEmail-compiled.js');\n})();\n\n;\n\n//# sourceMappingURL=sendEmail-compiled-compiled.js.map"]}